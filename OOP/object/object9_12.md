## 간단한 정리

- 의존성을 드러내자

## 9장

### 개방-폐쇄 원칙

- 컴파일 의존성 고정, 런타임 의존성 변경
- 기존 코드는 수정하지 않고 새로운 클래스 추가 가능

### Factory

- 객체 생성과 사용을 분리하기 위해 객체 생성에 특화된 객체를 Factory라고 함

### 의존성 주입

- 외부에서 의존성의 대상을 해결한 후 객체쪽으로 주입
- 의존성 해결을 위해 의존성을 객체의 퍼블릭 인터페이스에 명시적으로 드러내서 외부에서 필요한 런타임 의존성을 전달할 수 있도록 만드는 방법을 포괄함
  - 생성자 주입
  - setter주입
  - 메서드 주입

### 좋은 설계

- 클래스의 퍼블릭 인터페이스 만으로도 사용방법을 이해할수 있는 코드가 캡슐화 관점에서 훌륭한 코드
- 추상화에 의존하기

### 왜 역전?

- 전통적인 프로그램은 상위모듈이 하위모듈에 의존
- 객체지향은 상위,하위 모듈 모두 추상화에 의존
- 전통적인 패러다임에서는 인터페이스가 하위모듈에 속했다면 객체지향은 인터페이스가 상위모듈에 속함

## 10장

### 상속의 문제점

- 자식 클래스의 메서드 안에서 super 참조를 이용해 부모 크래스의 메서를 직접 호출할 경우 두 클래스는 강하게 결합됨
  - super호출을 제거할 수 있는 방법을 찾아 결합도 제거하기
- 상속은 코드 재사용을 위해 캡슐화를 희생시킨다

### 코드 중복을 위해 상속을 도입할때 지켜야하는 원칙

- 두 메서드가 유사해 보인다면 차이점을 메서드로 추출
- 부모 클래스의 코드를 하위로 내리지 말고 자식 클래스의 코드를 상위로 올리기

## 11장

### 합성

- 전체를 표현하는 객체가 부분을 표현하는 객체를 포함해서 부분 객체의 코드를 재사용
- has-a관계
- 상속은 구현에 의존하는 반면에 합성은 구현에 의존하지 않는다!
  - 객체의 구현이 아닌 퍼블릭 인터페이스에 의존
- 상속은 클래스 사이의 정적인 관계인데 비해 합성관계는 객체 사이의 동적인 관계
  - 실행 시점에 동적으로 변경할 수 있다
- 상속은 부모 클래스 안의 코드를 재사용, 합성은 객체의 퍼블릭 인터페이스 재사용

### 불필요한 인터페이스 상속문제

- 상속관계 제거하고 인스턴수 변수로 포함시키기

### 메서드 오버라이딩 오작용 문제

- implements사용
- 포워딩
  - 기존 클래스의 인터페이스를 그대로 외부에 제공
  - 동일한 메서드 호출하기 위해 추가된 메서드 : 포워딩 메서드

### 부모 클래스와 자식 클래스의 동시 수정 문제

- 구현에 대한 결합보단 인터페이스에 대한 결합이 낫다

### 합성은 컴파일 타임 관계를 런타임으로 변경한다!

- 합성은 관계를 고정하지 않는다
- 상속은 불필요하게 많은 클래스를 만드는 반면 합성은 그렇지 않다
  - 오직 하나의 클래스만 추가하고 런타임에 필요한 정책들을 조합해서 사용
  - 필요한 조합 수 만큼 매번 새로운 클래스를 추가하는 상속과 대조적

## 12장

- 상속을 왜 쓸까?
  - 코드 재사용 아님!
  - 다형성을 가능하게 하는 타입계층을 구축하기 위함
- 데이터 관점의 상속
  - 자식클래스의 인스턴스 안에 부모 클래스의 인스턴스를 포함
- 행동관점의 상속
  - 부모 클래스가 정의한 일부 메서드를 자식 클래스의 메서드로 포함시키기
  - 런타임에 자식 클래스에 정의되지 않은 메서드가 있을 경우 부모클래스에서 탐색한다!
  - 인스턴스는 두개여도 메모리에는 하나만 로드
- Self참조
  - 현재 객체 = self참조가 가리키는 객체
  - 객체가 메세지를 수신하면 컴파일러는 self참조라는 임시 변수를 자동으로 생성한 후 메세지 수신한 객체를 가리키도록 설정
  - this
- 동적 메서드 탐색의 원리 2가지
  - 자동적인 메세지 위임
    - 자신이 이해할 수 없는 메세지를 전송받은 경우 상속계층을 따라 부모 클래스에게 처리를 위임한다
  - 동적인 문맥 사용
    - 실제로 어떤 메서드를 실행하는지 결정하는 것은 컴파일 시점이 아닌 실행시점
    - 메서드 탐색하는 경로는 self참조를 이용해서 결정
- Super참조
  - 지금 이 클래스의 부모 클래스에서부터 메서드 탐색을 시작하시오
- 위임
  - 자신이 수신한 메세지를 다른 객체에게 동일하게 전달해서 처리를 요청
